# å¼€å§‹q0å‚æ•°è°ƒä¼˜ï¼ˆP0ä»»åŠ¡ï¼‰

## âœ… Gitå·²æ¨é€

æ‰€æœ‰æ›´æ”¹å·²æˆåŠŸæ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚

---

## ğŸ“‹ è°ƒå‚å‰ç½®æ¡ä»¶æ£€æŸ¥

### å¿…éœ€æ–‡ä»¶

1. âœ… **æ•°æ®é›†æ–‡ä»¶**ï¼š`data/dev.jsonl`ï¼ˆdevé›†ï¼‰
2. âš ï¸ **Baselineæ–‡ä»¶**ï¼š`output/dev_with_uncertainty.jsonl`ï¼ˆåŒ…å«çœŸå®æ ‡ç­¾å’Œé¢„æµ‹ç»“æœï¼‰
3. âœ… **è¯è¡¨ç›®å½•**ï¼š`configs/lexicons/`ï¼ˆåŒ…å«porn.txt, politics.txt, abuse.txtï¼‰

### å¯é€‰ä½†æ¨è

- âœ… **pyahocorasickåº“**ï¼šå·²æ·»åŠ åˆ°requirements.txtï¼Œå»ºè®®å…ˆå®‰è£…ä»¥æå‡æ•ˆç‡

---

## ğŸš€ æ‰§è¡Œæ­¥éª¤

### æ­¥éª¤1ï¼šå®‰è£…pyahocorasickï¼ˆæ¨èï¼‰

```bash
pip install pyahocorasick>=2.0.0
```

æˆ–ä½¿ç”¨requirements.txtï¼š

```bash
pip install -r requirements.txt
```

**éªŒè¯å®‰è£…**ï¼šè¿è¡Œq0_builderæ—¶ä¼šçœ‹åˆ° `âœ“ æ„å»º Aho-Corasick è‡ªåŠ¨æœºç¼“å­˜`

---

### æ­¥éª¤2ï¼šæ£€æŸ¥å‰ç½®æ–‡ä»¶

```bash
# æ£€æŸ¥dev.jsonl
if (Test-Path "data/dev.jsonl") { Write-Host "âœ“ dev.jsonlå­˜åœ¨" } else { Write-Host "âœ— dev.jsonlä¸å­˜åœ¨" }

# æ£€æŸ¥dev_with_uncertainty.jsonl
if (Test-Path "output/dev_with_uncertainty.jsonl") { Write-Host "âœ“ dev_with_uncertainty.jsonlå­˜åœ¨" } else { Write-Host "âœ— éœ€è¦ç”Ÿæˆï¼Œè¿è¡Œ: python scripts/uncertainty_analysis.py --dev-file dev.jsonl --output-dir output" }
```

---

### æ­¥éª¤3ï¼šè¿è¡Œå‚æ•°è°ƒä¼˜ï¼ˆå¿«é€Ÿæ¨¡å¼ï¼‰

**å¿«é€Ÿæ¨¡å¼**ï¼ˆæ¨èï¼Œ12ç§ç»„åˆï¼Œ1-2å°æ—¶ï¼‰ï¼š

```bash
python scripts/q0_hyperparameter_search.py \
    --dataset-file data/dev.jsonl \
    --baseline-file output/dev_with_uncertainty.jsonl \
    --lexicon-dir configs/lexicons \
    --mode fast \
    --output-dir output
```

**å®Œæ•´æ¨¡å¼**ï¼ˆ384ç§ç»„åˆï¼Œ6-12å°æ—¶ï¼Œå¯é€‰ï¼‰ï¼š

```bash
python scripts/q0_hyperparameter_search.py \
    --dataset-file data/dev.jsonl \
    --baseline-file output/dev_with_uncertainty.jsonl \
    --lexicon-dir configs/lexicons \
    --mode full \
    --output-dir output
```

---

### æ­¥éª¤4ï¼šæŸ¥çœ‹ç»“æœ

**è¾“å‡ºæ–‡ä»¶**ï¼š
- `output/q0_param_search_results.csv`ï¼šæ‰€æœ‰å‚æ•°ç»„åˆçš„è¯„ä¼°ç»“æœ
- `output/q0_best_params.json`ï¼šæœ€ä¼˜å‚æ•°é…ç½®

**æŸ¥çœ‹æœ€ä¼˜å‚æ•°**ï¼š

```bash
# æŸ¥çœ‹JSONæ ¼å¼çš„æœ€ä¼˜å‚æ•°
cat output/q0_best_params.json

# æˆ–ä½¿ç”¨PythonæŸ¥çœ‹
python -c "import json; print(json.dumps(json.load(open('output/q0_best_params.json')), indent=2, ensure_ascii=False))"
```

---

### æ­¥éª¤5ï¼šåº”ç”¨æœ€ä¼˜å‚æ•°

1. **æ›´æ–°config.yaml**ï¼š
   ```yaml
   q0:
     base_sensitive_prob: <æœ€ä¼˜å€¼>
     max_sensitive_prob: <æœ€ä¼˜å€¼>
     min_matches_for_sensitive: <æœ€ä¼˜å€¼>
     politics_weight: <æœ€ä¼˜å€¼>  # å¦‚æœå®Œæ•´æ¨¡å¼æœç´¢äº†
     abuse_weight: <æœ€ä¼˜å€¼>      # å¦‚æœå®Œæ•´æ¨¡å¼æœç´¢äº†
   ```

2. **é‡æ–°ç”Ÿæˆq0**ï¼š
   ```bash
   python scripts/q0_builder.py --datasets train dev test
   ```

3. **é‡æ–°è¿è¡ŒDay7-Day9**éªŒè¯æ•ˆæœ

---

## ğŸ“Š é¢„æœŸç»“æœ

**å½“å‰q0è´¨é‡**ï¼ˆdevé›†ï¼‰ï¼š
- Precision: 86.48%
- Recall: 35.31%
- F1: 50.14%

**è°ƒä¼˜ç›®æ ‡**ï¼š
- Recall > 40%
- F1 > 55%
- Precision > 80%ï¼ˆä¿æŒï¼‰

**é¢„æœŸæ”¹å–„**ï¼šF1ä»50%æå‡åˆ°55-60%

---

## â±ï¸ é¢„è®¡è€—æ—¶

- **å¿«é€Ÿæ¨¡å¼**ï¼š1-2å°æ—¶ï¼ˆ12ç§ç»„åˆï¼‰
- **å®Œæ•´æ¨¡å¼**ï¼š6-12å°æ—¶ï¼ˆ384ç§ç»„åˆï¼‰

**å»ºè®®**ï¼šå…ˆè¿è¡Œå¿«é€Ÿæ¨¡å¼ï¼Œå¦‚æœç»“æœæ»¡æ„å°±ä¸éœ€è¦å®Œæ•´æ¨¡å¼ã€‚

---

## ğŸ” ç›‘æ§è¿›åº¦

è„šæœ¬ä¼šè¾“å‡ºæ¯ä¸ªå‚æ•°ç»„åˆçš„è¯„ä¼°ç»“æœï¼ŒåŒ…æ‹¬ï¼š
- F1åˆ†æ•°
- Precision
- Recall
- å½“å‰æ’å

æœ€ç»ˆä¼šæ˜¾ç¤ºTop 5å‚æ•°ç»„åˆå’Œæœ€ä¼˜å‚æ•°ã€‚

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç¡®ä¿å®‰è£…äº†pyahocorasick**ï¼šå¦åˆ™è°ƒä¼˜è¿‡ç¨‹ä¼šéå¸¸æ…¢
2. **ä½¿ç”¨devé›†è°ƒä¼˜**ï¼šä¸è¦ä½¿ç”¨testé›†
3. **ä¿å­˜ç»“æœ**ï¼šè°ƒä¼˜å®Œæˆåè®°å¾—ä¿å­˜æœ€ä¼˜å‚æ•°åˆ°config.yaml
4. **éªŒè¯æ•ˆæœ**ï¼šåº”ç”¨æœ€ä¼˜å‚æ•°åéœ€è¦é‡æ–°è¿è¡ŒDay7-Day9éªŒè¯EMGæ•ˆæœ

